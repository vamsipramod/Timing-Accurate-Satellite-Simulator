SUBDIRS = src
LIB_DIR = ./lib
BIN_DIR = ./bin
SRC = ./src

NANOLOG_LIB= ./src/NanoLog/runtime/libNanoLog.a
.PHONY :$(SUBDIRS)

$(SUBDIRS):
	$(MAKE) -C $@
	# $(MAKE) -C $@

clean:
		$(MAKE) -C $(SUBDIRS) clean

clean-all:
		$(MAKE) -C $(SUBDIRS) clean-all

install:
		mkdir -p $(LIB_DIR)
		mkdir -p $(BIN_DIR)
		ln -s -f -r $(NANOLOG_LIB) $(LIB_DIR)/libNanoLog.a
		ln -s -f -r $(SRC)/decompress.sh $(BIN_DIR)/decompress.sh
		ln -s -f -r $(SRC)/satsim $(BIN_DIR)/satsim

distclean: clean-all
		rm -f TAGS Makefile config.status config.log configure compressedLog text_section.txt
		rm -r -f $(LIB_DIR) $(BIN_DIR)
